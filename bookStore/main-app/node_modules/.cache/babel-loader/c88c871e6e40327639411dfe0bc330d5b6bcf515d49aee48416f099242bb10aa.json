{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { getBooks, getBookById, searchBooks, getCategories } from '../services/api';\nimport { toast } from 'react-toastify';\nexport const useBooks = () => {\n  _s();\n  const [books, setBooks] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const fetchBooks = async () => {\n    setLoading(true);\n    try {\n      const response = await getBooks();\n      setBooks(response.data);\n    } catch (err) {\n      var _err$response, _err$response$data, _err$response2, _err$response2$data;\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Ошибка загрузки книг');\n      toast.error(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || 'Ошибка загрузки книг');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const fetchBookById = async id => {\n    setLoading(true);\n    try {\n      const response = await getBookById(id);\n      return response.data;\n    } catch (err) {\n      var _err$response3, _err$response3$data, _err$response4, _err$response4$data;\n      setError(((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.message) || 'Ошибка загрузки книги');\n      toast.error(((_err$response4 = err.response) === null || _err$response4 === void 0 ? void 0 : (_err$response4$data = _err$response4.data) === null || _err$response4$data === void 0 ? void 0 : _err$response4$data.message) || 'Ошибка загрузки книги');\n      throw err;\n    } finally {\n      setLoading(false);\n    }\n  };\n  const fetchCategories = async () => {\n    setLoading(true);\n    try {\n      const response = await getCategories();\n      setCategories(response.data);\n    } catch (err) {\n      var _err$response5, _err$response5$data, _err$response6, _err$response6$data;\n      setError(((_err$response5 = err.response) === null || _err$response5 === void 0 ? void 0 : (_err$response5$data = _err$response5.data) === null || _err$response5$data === void 0 ? void 0 : _err$response5$data.message) || 'Ошибка загрузки категорий');\n      toast.error(((_err$response6 = err.response) === null || _err$response6 === void 0 ? void 0 : (_err$response6$data = _err$response6.data) === null || _err$response6$data === void 0 ? void 0 : _err$response6$data.message) || 'Ошибка загрузки категорий');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const search = async title => {\n    setLoading(true);\n    try {\n      const response = await searchBooks(title);\n      setBooks(response.data);\n    } catch (err) {\n      var _err$response7, _err$response7$data, _err$response8, _err$response8$data;\n      setError(((_err$response7 = err.response) === null || _err$response7 === void 0 ? void 0 : (_err$response7$data = _err$response7.data) === null || _err$response7$data === void 0 ? void 0 : _err$response7$data.message) || 'Ошибка поиска');\n      toast.error(((_err$response8 = err.response) === null || _err$response8 === void 0 ? void 0 : (_err$response8$data = _err$response8.data) === null || _err$response8$data === void 0 ? void 0 : _err$response8$data.message) || 'Ошибка поиска');\n    } finally {\n      setLoading(false);\n    }\n  };\n  return {\n    books,\n    categories,\n    fetchBooks,\n    fetchBookById,\n    fetchCategories,\n    search,\n    loading,\n    error\n  };\n};\n_s(useBooks, \"FAUKZQ6eOoZcJbJilD+C0owMuHM=\");","map":{"version":3,"names":["useState","useEffect","getBooks","getBookById","searchBooks","getCategories","toast","useBooks","_s","books","setBooks","categories","setCategories","loading","setLoading","error","setError","fetchBooks","response","data","err","_err$response","_err$response$data","_err$response2","_err$response2$data","message","fetchBookById","id","_err$response3","_err$response3$data","_err$response4","_err$response4$data","fetchCategories","_err$response5","_err$response5$data","_err$response6","_err$response6$data","search","title","_err$response7","_err$response7$data","_err$response8","_err$response8$data"],"sources":["G:/Downloads/ZALUPA/ZALUPA/main-app/src/hooks/useBooks.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { getBooks, getBookById, searchBooks, getCategories } from '../services/api';\r\nimport { toast } from 'react-toastify';\r\n\r\nexport const useBooks = () => {\r\n  const [books, setBooks] = useState([]);\r\n  const [categories, setCategories] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const fetchBooks = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await getBooks();\r\n      setBooks(response.data);\r\n    } catch (err) {\r\n      setError(err.response?.data?.message || 'Ошибка загрузки книг');\r\n      toast.error(err.response?.data?.message || 'Ошибка загрузки книг');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchBookById = async (id) => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await getBookById(id);\r\n      return response.data;\r\n    } catch (err) {\r\n      setError(err.response?.data?.message || 'Ошибка загрузки книги');\r\n      toast.error(err.response?.data?.message || 'Ошибка загрузки книги');\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchCategories = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await getCategories();\r\n      setCategories(response.data);\r\n    } catch (err) {\r\n      setError(err.response?.data?.message || 'Ошибка загрузки категорий');\r\n      toast.error(err.response?.data?.message || 'Ошибка загрузки категорий');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const search = async (title) => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await searchBooks(title);\r\n      setBooks(response.data);\r\n    } catch (err) {\r\n      setError(err.response?.data?.message || 'Ошибка поиска');\r\n      toast.error(err.response?.data?.message || 'Ошибка поиска');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return { books, categories, fetchBooks, fetchBookById, fetchCategories, search, loading, error };\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}